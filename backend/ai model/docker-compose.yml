version: "3.8"
services:
  api:
    build: .
    environment:
      - OPENAI_API_KEY=${OPENAI_API_KEY}
      - DB_FILE=/app/college.db
      - MODEL_PLANNER=gpt-5-nano
      - MODEL_QUIZ=gpt-4o-mini
      - MODEL_STUDY=gpt-4o
    volumes:
      - ./:/app
    ports:
      - "8000:8000"
    command: >
      sh -c "sqlite3 /app/college.db < migrations/create_tables.sql || true && uvicorn app_full_prototype_improved:app --host 0.0.0.0 --port 8000"
